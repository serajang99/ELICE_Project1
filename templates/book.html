<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Bootstrap JS -->
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
    <script
      type="text/javascript"
      src="/static/js/jquery-3.6.0.min.js"
    ></script>
    <style>
      #myform fieldset {
        display: inline-block; /* 하위 별점 이미지들이 있는 영역만 자리를 차지함.*/
        border: 0; /* 필드셋 테두리 제거 */
      }
      #myform input[type="radio"] {
        display: none; /* 라디오박스 감춤 */
      }
      #myform label {
        font-size: 1em; /* 이모지 크기 */
        color: transparent; /* 기존 이모지 컬러 제거 */
        text-shadow: 0 0 0 #f0f0f0; /* 새 이모지 색상 부여 */
      }
      #myform label:hover {
        text-shadow: 0 0 0 #ffeb46; /* 마우스 호버 */
      }
      #myform label:hover ~ label {
        text-shadow: 0 0 0 #ffeb46; /* 마우스 호버 뒤에오는 이모지들 */
      }
      #myform fieldset {
        display: inline-block; /* 하위 별점 이미지들이 있는 영역만 자리를 차지함.*/
        direction: rtl; /* 이모지 순서 반전 */
        border: 0; /* 필드셋 테두리 제거 */
      }

      #myform fieldset legend {
        text-align: left;
      }
      #myform input[type="radio"]:checked ~ label {
        text-shadow: 0 0 0 #ffeb46; /* 마우스 클릭 체크 */
      }
    </style>
    <title>Elice Project</title>
  </head>

  <body>
    <main>
      <div class="container-fluid py-4">
        <nav class="navbar navbar-light border-bottom mb-4">
          <div class="container-fluid">
            <a
              href="/"
              class="d-flex align-items-center text-dark text-decoration-none"
            >
              <img
                src="/static/img/book_logo.png"
                height="30"
                class="d-inline-block align-text-top"
              />
              <span style="height:34px; line-height:30px" class="ps-2 fs-4">Elice Library</span>
            </a>
            <form class="d-flex">
              {% if g.email %}
              <a href="{{ url_for('rent.list')}}">
                <button type="button" class="btn btn-outline-primary mx-1">
                  대여기록
                </button>
              </a>
              <a href="{{ url_for('rent.ret',id=-1)}}">
                <button type="button" class="btn btn-outline-primary mx-1">
                  반납하기
                </button>
              </a>
              <a href="{{ url_for('auth.signout') }}">
                <button type="button" class="btn btn-outline-primary mx-1">
                  로그아웃
                </button>
              </a>
              {% else %}
              <a href="{{ url_for('auth.signin') }}">
                <button type="button" class="btn btn-outline-primary mx-1">
                  로그인
                </button>
              </a>
              <a href="{{ url_for('auth.signup') }}">
                <button type="button" class="btn btn-outline-primary ms-1">
                  회원가입
                </button>
              </a>
              {% endif %}
            </form>
          </div>
        </nav>

        <div class="p-5 mb-5 bg-light rounded-3">
          <div class="bg-white rounded-5 ">
            <div class="p-5 d-inline-flex text-center">
              <img
                src="../../static/{{book.img}}"
                height="350px"
                class="mx-5 my-2"
              />
              <table class="table table-light ml-3">
                <tbody>
                  <tr class="align-middle">
                    <td width="200" class="h6 fw-bold">책 제목</td>
                    <td width="500" class="h6">{{book.title}}</td>
                  </tr>
                  <tr class="align-middle">
                    <td width="200" class="h6 fw-bold">저자</td>
                    <td width="500" class="h6">{{book.author}}</td>
                  </tr>
                  <tr class="align-middle">
                    <td width="200" class="h6 fw-bold">출판사</td>
                    <td width="500" class="h6">{{book.publisher}}</td>
                  </tr>
                  <tr class="align-middle">
                    <td width="200" class="h6 fw-bold">출간일</td>
                    <td width="500" class="h6">{{book.publication_date}}</td>
                  </tr>
                  <tr class="align-middle">
                    <td width="200" class="h6 fw-bold">페이지 수</td>
                    <td width="500" class="h6">{{book.pages}}</td>
                  </tr>
                  <tr class="align-middle">
                    <td width="200" class="h6 fw-bold">ISBN 코드</td>
                    <td width="500" class="h6">{{book.isbn}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="container-fluid p-5">
              <table class="mx-5">
                <thead class="my-3">
                  <th class="h5 fw-bold my-3">책 소개</th>
                </thead>
                <tbody class="my-3">
                  <tr height="10"><td> </td></tr>
                  <tr>
                    <td class="text-left">{{book.description}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="container-fluid p-5 bg-white my-5">
            <div class="comments-wrap" style="margin-bottom: 10px">
              <div style="margin-bottom: 10px;">댓글 게시판</div>
              {% for review in reviews %}
              <div class="p-2 bg-light border border-dark rounded-3" style="margin-bottom: 10px">
                <div class="p-1" style="margin-left:auto">익명{{review.user_id}}</div>
                <div class="d-flex p-2">
                  <div style="width: 80%; margin-left:auto; margin-right:10px;">{{review.comment}}</div>
                  <div style="width: 10%; margin-right:auto;">{{'★'*review.star+'☆'*(5-review.star)}}</div>
                </div>
              </div>
              {%endfor%}
            <div>
            <div class="comment-wrap">
              <form method="POST" id="myform">
                <div style="margin-bottom: 5px; margin-top: 50px">
                  <fieldset class="align-right">
                    <input
                      type="radio"
                      name="rating"
                      value="5"
                      id="rate1"
                    /><label for="rate1">⭐</label>
                    <input
                      type="radio"
                      name="rating"
                      value="4"
                      id="rate2"
                    /><label for="rate2">⭐</label>
                    <input
                      type="radio"
                      name="rating"
                      value="3"
                      id="rate3"
                    /><label for="rate3">⭐</label>
                    <input
                      type="radio"
                      name="rating"
                      value="2"
                      id="rate4"
                    /><label for="rate4">⭐</label>
                    <input
                      type="radio"
                      name="rating"
                      value="1"
                      id="rate5"
                    /><label for="rate5">⭐</label>
                  </fieldset>
                </div>
                <div class="d-flex">
                  {% if g.email %}
                  <input
                    type="text"
                    class="form-control mb-3"
                    id="commentBox"
                    name="comment"
                    placeholder="댓글을 작성하세요"
                    style="width: 90%; margin-right:10px;"
                  />
                  
                  <div style="width: 10%">
                    <button type="submit" class="btn btn-primary btn-md"  style="width: 100%">
                      등록
                    </button>
                  </div>
                  {%else%}
                  <input type="text" class="form-control mb-3" id="commentBox" name="comment" placeholder="로그인이 필요한 기능입니다"
                    style="width: 90%; margin-right:10px;" />
                  <div style="width: 10%">
                    <button type="submit" class="btn btn-primary btn-md disabled" style="width: 100%">
                      등록
                    </button>
                  </div>
                  {%endif%}
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
